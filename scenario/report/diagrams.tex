\section{test diagrams}

\pagebreak

\begin{tikzpicture}[
    grow=down,
    level 1/.style={sibling distance=3.5cm,level distance=5.2cm},
    level 2/.style={sibling distance=3.5cm, level distance=6.7cm},
    edge from parent/.style={very thick,draw=blue!40!black!60,
        shorten >=5pt, shorten <=5pt},
    edge from parent path={(\tikzparentnode.south) -- (\tikzchildnode.north)},
    kant/.style={text width=2cm, text centered, sloped},
    every node/.style={text ragged, inner sep=2mm},
    incomingp/.style={rectangle, minimum size=6mm, very thick,
        draw=red!50!black!50, top color=white, bottom color=red!50!black!20,
        font=\itshape},
    QueueShape/.style={rectangle, minimum size=6mm, rounded corners=3mm,
        very thick, draw=black!50, top color=white, bottom color=black!20,
        font=\itshape},
    FilterShape/.style={rectangle, minimum size=6mm, very thick,
        draw=blue!50!black!50, top color=white, bottom color=black!20,
        font=\itshape},
    HashShape/.style={rectangle, minimum size=6mm, very thick,
        draw=green!50!black!20, top color=white, bottom color=black!20,
        font=\itshape}
]
\node (incoming) [incomingp] {Incoming packets}
    child {
        node (filter1) [FilterShape] [rectangle split, rectangle split,
            rectangle split parts=2, text ragged] {
            \textbf{Filtering}
                  \nodepart{second}
            $ Filter(Protocol, dest-port, dest-IP) $
            }
            child { node (otherPackets) [QueueShape] {Other packets}}
            child {
                node (hash1) [HashShape] [rectangle split, rectangle split,
                    rectangle split parts=2, text ragged] {
                    \textbf{Load balancing Hash}
                        \nodepart{second}
                   $ Hash(src-port, src-IP) $
                    }
                    child {node {core 1}}
                    child {node {core 2}}
                    child {node {core n}}
                    }
    };
\end{tikzpicture}

\pagebreak


\begin{tikzpicture}[
    grow=right,
    level 1/.style={sibling distance=3.5cm,level distance=5.2cm},
    level 2/.style={sibling distance=3.5cm, level distance=6.7cm},
    edge from parent/.style={very thick,draw=blue!40!black!60,
        shorten >=5pt, shorten <=5pt},
    edge from parent path={(\tikzparentnode.east) -- (\tikzchildnode.west)},
    kant/.style={text width=2cm, text centered, sloped},
    every node/.style={text ragged, inner sep=2mm},
    punkt/.style={rectangle, rounded corners, shade, top color=white,
    bottom color=blue!50!black!20, draw=blue!40!black!60, very
    thick }
    ]


\node[punkt, text width=5.5em] {Incoming packet}
    %Lower part lv1
    child {
        node[punkt] [rectangle split, rectangle split, rectangle split parts=3,
         text ragged] {
            \textbf{Other packets}
                  \nodepart{second}
            $\text{Country \B}\colon    s\bar{Q}$
                  \nodepart{third}
            $\text{Country \A}\colon\pa{1-s}\bar{Q}$
        }
        edge from parent
            node[kant, below, pos=.6] {Unchanged parity}
    }
    %Upper part, lv1
    child {
        node[punkt, text width=6em] {Country~\A}
        %child 1
        child {
            node [punkt,rectangle split, rectangle split,
            rectangle split parts=3] {
                \textbf{Scenario  2}
                \nodepart{second}
                $\text{Country \B}\colon s\bar{Q}+2\alpha\Delta E -sc$
                \nodepart{third}
                $\text{Country \A}\colon\pa{1-s}\bar{Q}-\alpha\Delta E -
                \pa{1-s}c$
            }
            edge from parent
                node[below, kant,  pos=.6] {Unchanged parity}
        }
        %child 2
        child {
            node [punkt, rectangle split, rectangle split parts=3]{
                \textbf{Scenario 3}
                \nodepart{second}
                $\text{Country \B}\colon s\bar{Q}-2sc$
                \nodepart{third}
                $\text{Country \A}\colon\pa{1-s}\bar{Q}-2\pa{1-s}c$
            }
            edge from parent
                node[kant, above] {Devalues}}
            edge from parent{
                node[kant, above] {Devalues}}
    };
\end{tikzpicture}


